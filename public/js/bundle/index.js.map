{"mappings":"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","sources":["public/js/mapbox.js","public/js/alerts.js","public/js/authentiication.js","public/js/updateSettings.js","public/js/stripe.js","public/js/index.js"],"sourcesContent":["/* eslint-disable */\nexport const displayMap = locations => {\n    mapboxgl.accessToken =\n        'pk.eyJ1IjoieWFzaGd1cHRhMTExMSIsImEiOiJjbGNjZzB2ZDUyazhwM3d0OHF0ZnhtcmhkIn0.S93xXiysZdlPuelZHk1Wdw';\n\n    var map = new mapboxgl.Map({\n        container: 'map',\n        style: 'mapbox://styles/yashgupta1111/clcci2fmq002p14p2o4z1kvxy',\n        scrollZoom: false\n    });\n\n    const bounds = new mapboxgl.LngLatBounds();\n\n    locations.forEach(loc => {\n        // Create marker\n        const el = document.createElement('div');\n        el.className = 'marker';\n\n        // Add marker\n        new mapboxgl.Marker({\n            element: el,\n            anchor: 'bottom'\n        })\n            .setLngLat(loc.coordinates)\n            .addTo(map);\n\n        // Add popup\n        new mapboxgl.Popup({\n            offset: 30\n        })\n            .setLngLat(loc.coordinates)\n            .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n            .addTo(map);\n\n        // Extend map bounds to include current location\n        bounds.extend(loc.coordinates);\n    });\n\n    map.fitBounds(bounds, {\n        padding: {\n            top: 200,\n            bottom: 150,\n            left: 100,\n            right: 100\n        }\n    });\n};\n","/* eslint-disable */\n\nexport const hideAlert = () => {\n    const el = document.querySelector('.alert');\n    if (el) el.parentElement.removeChild(el);\n};\n\n// type can be 'success' or 'error'\nexport const showAlert = (type, msg, time = 5) => {\n    hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n    window.setTimeout(hideAlert, time * 1000);\n};\n","/* eslint-disable */\n// import axios from 'axios';\nimport { showAlert } from './alerts';\n\n// const urlDomain = 'http://127.0.0.1:3000';\nconst urlDomain = 'https://adventure-authentication.up.railway.app';\n\nexport const login = async (email, password) => {\n    try {\n        const res = await axios({\n            method: 'POST',\n            url: urlDomain + '/user/login',\n            data: {\n                email,\n                password\n            },\n            withCredentials: true\n        });\n        if (res.data.status === 'success') {\n            showAlert('success', 'Logged in successfully!');\n            window.setTimeout(() => {\n                location.assign('/');\n            }, 1500);\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\nexport const getCookie = cname => {\n    let name = cname + '=';\n    let ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return '';\n};\n\nexport const getAccessToken = async () => {\n    try {\n        const res = await axios({\n            method: 'GET',\n            url: urlDomain + '/user/getAccessToken',\n            withCredentials: true\n        });\n    } catch (err) {}\n};\n\nexport const signup = async (name, password, passwordConfirm) => {\n    try {\n        const res = await axios({\n            method: 'POST',\n            url: '/api/v1/users/signup',\n            data: {\n                name,\n                password,\n                passwordConfirm\n            },\n            withCredentials: true\n        });\n\n        if (res.data.status === 'success') {\n            showAlert('success', 'Signup successfull!');\n            window.setTimeout(() => {\n                location.assign('/login');\n            }, 1500);\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\n\nexport const logout = async () => {\n    try {\n        const res = await axios({\n            method: 'GET',\n            url: '/api/v1/users/logout',\n            withCredentials: true\n        });\n        if (res.data.status === 'success') {\n            // location.reload(true);\n\n            // my\n            showAlert('success', 'Logged out successfully!');\n            window.setTimeout(() => {\n                location.assign('/');\n            }, 1500);\n        }\n    } catch (err) {\n        showAlert('error', 'Error in logging out please try again!');\n    }\n};\n","/* eslint-disable */\nimport { showAlert } from './alerts';\n\n// type can be password or data(in data there is name only) or photo\nexport const updateSettings = async (data, type) => {\n    let res;\n    try {\n        const url =\n            type === 'password'\n                ? '/api/v1/users/updateMyPassword'\n                : '/api/v1/users/updateMe';\n\n        res = await axios({\n            method: 'PATCH',\n            url,\n            data\n        });\n\n        if (res.data.status === 'success') {\n            if (type === 'password') {\n                showAlert(\n                    'success',\n                    `${type.toUpperCase()} updated successfully!`\n                );\n                window.setTimeout(() => {\n                    location.assign('/login');\n                }, 2500);\n            } else {\n                showAlert(\n                    'success',\n                    `${type.toUpperCase()} updated successfully!`\n                );\n            }\n\n            if (type === 'photo') {\n                return res.data.data.updatedUser.photo;\n            }\n            if (type === 'data') {\n                return res.data.data.updatedUser.name;\n            }\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\n\nexport const reviewCreate = async (tour, review, rating) => {\n    // tour is tourId here\n    let res;\n    try {\n        const url = '/api/v1/reviews';\n        res = await axios({\n            method: 'POST',\n            url,\n            data: {\n                review,\n                rating,\n                tour\n            }\n        });\n        if (res.data.status === 'success') {\n            showAlert('success', `Review created successfully!`);\n            window.setTimeout(() => {\n                location.reload(true);\n            }, 3000);\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\nexport const reviewUpdate = async (revId, review, rating) => {\n    let res;\n    try {\n        const url = '/api/v1/reviews/' + revId;\n        res = await axios({\n            method: 'PATCH',\n            url,\n            data: {\n                review,\n                rating\n            }\n        });\n        if (res.data.status === 'success') {\n            showAlert('success', `Review updated successfully!`);\n            window.setTimeout(() => {\n                location.reload(true);\n            }, 3000);\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\n\nexport const reviewDelete = async reviewid => {\n    let res;\n    try {\n        const url = '/api/v1/reviews/' + reviewid;\n        res = await axios({\n            method: 'DELETE',\n            url\n        });\n        showAlert('success', `Review deleted successfully!`);\n        window.setTimeout(() => {\n            location.reload(true);\n        }, 3000);\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\n","/* eslint-disable */\n// import axios from 'axios';\n// const stripe = Stripe(\n// 'pk_test_51MMH1cSCFIFH28nc81LgT8gYmaByQwiw8WKJebkBQGl3AVj6PMnGWSCfOUuBIMZIZKIegfGGkndDnrbCGh7pt6pg00u2RrwCsD'\n// );\nimport { showAlert } from './alerts';\n\nexport const bookTour = async tourId => {\n    try {\n        // get checkout session from API\n\n        // by default get method in axios\n        // console.log(tourId);\n        const response = await axios(\n            `/api/v1/bookings/checkout-session/${tourId}`\n        );\n\n        // await stripe.redirectToCheckout({\n        //     sessionId: response.data.session.id\n        // });\n\n        // we can also use directly url as it is given in response no need of stripe.redirecto function\n        window.setTimeout(() => {\n            location.assign(response.data.session.url);\n        }, 100);\n    } catch (err) {\n        showAlert('error', err);\n        console.log(err);\n        console.log(error.response.request._response);\n    }\n};\n","/* eslint-disable */\n// import '@babel/polyfill';\nimport { displayMap } from './mapbox';\n\nimport {\n    login,\n    logout,\n    signup,\n    getAccessToken,\n    getCookie\n} from './authentiication';\n\nimport {\n    updateSettings,\n    reviewCreate,\n    reviewUpdate,\n    reviewDelete\n} from './updateSettings';\n\nimport { bookTour } from './stripe';\nimport { showAlert } from './alerts';\n\n// DOM Elements\nconst mapBox = document.getElementById('map');\nconst reviewFormCreate = document.getElementById('review--form--create');\nconst reviewForm = document.getElementById('review--form');\nconst reviewDeleteBtns = document.querySelectorAll('.review__delete');\nconst reviewChangeBtns = document.querySelectorAll('.review__edit');\nconst loginForm = document.querySelector('.form--login');\nconst signupForm = document.querySelector('.form--signup');\nconst logoutBtn = document.querySelector('.nav__el--logout');\nconst dataForm = document.querySelector('.form-user-data');\nconst passwordForm = document.querySelector('.form-user-password');\nconst imageChange = document.querySelector('.form__upload');\nconst bookTourBTN = document.getElementById('book-tour');\nconst headAlertDataset = document.querySelector('body').dataset.alert;\nconst headerName = document.getElementById('headerName');\nconst queryString = window.location.search;\n\n// DELEGATION\nif (mapBox) {\n    const locations = JSON.parse(\n        document.getElementById('map').dataset.locations\n    );\n    displayMap(locations);\n}\nif (reviewFormCreate) {\n    reviewFormCreate.addEventListener('submit', event => {\n        event.preventDefault();\n        const tourid = document.getElementById('review--form--create').dataset\n            .tourid;\n        const review = document.getElementById('review-create').value;\n        const rating = document.getElementById('rating-create').value;\n        reviewCreate(tourid, review, rating);\n    });\n}\nif (reviewForm) {\n    reviewForm.addEventListener('submit', event => {\n        event.preventDefault();\n        const revid = document.getElementById('review--form').dataset.revid;\n        const review = document.getElementById('review').value;\n        const rating = document.getElementById('rating').value;\n        reviewUpdate(revid, review, rating);\n    });\n}\nif (reviewDeleteBtns) {\n    reviewDeleteBtns.forEach(button => {\n        button.addEventListener('click', event => {\n            event.preventDefault();\n            // `event.target` refers to the button that was clicked\n            const reviewid = event.target.dataset.reviewid;\n            reviewDelete(reviewid);\n        });\n    });\n}\nif (reviewChangeBtns) {\n    reviewChangeBtns.forEach(button => {\n        button.addEventListener('click', event => {\n            event.preventDefault();\n            // `event.target` refers to the button that was clicked\n            const tourid = event.target.dataset.tourid;\n            window.setTimeout(() => {\n                location.assign(tourid);\n            }, 1500);\n        });\n    });\n}\nif (loginForm) {\n    loginForm.addEventListener('submit', event => {\n        event.preventDefault();\n        const email = document.getElementById('email').value;\n        const password = document.getElementById('password').value;\n        login(email, password);\n    });\n}\nif (signupForm) {\n    signupForm.addEventListener('submit', event => {\n        event.preventDefault();\n        const name = document.getElementById('name').value;\n        const password = document.getElementById('password').value;\n        const passwordConfirm = document.getElementById('passwordConfirm')\n            .value;\n        signup(name, password, passwordConfirm);\n    });\n}\nif (logoutBtn) {\n    logoutBtn.addEventListener('click', logout);\n}\n\n// without photo\nif (dataForm) {\n    dataForm.addEventListener('submit', async event => {\n        event.preventDefault();\n        const name = document.getElementById('name').value;\n        const email = document.getElementById('email').value;\n        const updatedName = await updateSettings({ name, email }, 'data');\n        headerName.textContent = updatedName;\n    });\n}\n\n// with photo and all data submit at once i.e name email photo\n//hence need to create form data object no need to change updateSettings\n// if (dataForm) {\n//     dataForm.addEventListener('submit', event => {\n//         event.preventDefault();\n//         const form = new FormData();\n//         form.append('name', document.getElementById('name').value);\n//         form.append('email', document.getElementById('email').value);\n//         form.append('photo', document.getElementById('photo').files[0]);\n//         updateSettings(form, 'data');\n//     });\n// };\n\nif (imageChange) {\n    imageChange.addEventListener('change', async event => {\n        event.preventDefault();\n        const form = new FormData();\n        form.append('photo', document.getElementById('photo').files[0]);\n\n        const newUserPhotoName = await updateSettings(form, 'photo');\n        if (newUserPhotoName) {\n            if(newUserPhotoName.startsWith('https')){\n                document\n                    .querySelector('.nav__user-img')\n                    .setAttribute('src', `${newUserPhotoName}`);\n                document\n                    .querySelector('.form__user-photo')\n                    .setAttribute('src', `${newUserPhotoName}`);\n            }else{\n                document\n                    .querySelector('.nav__user-img')\n                    .setAttribute('src', `/img/users/${newUserPhotoName}`);\n                document\n                    .querySelector('.form__user-photo')\n                    .setAttribute('src', `/img/users/${newUserPhotoName}`);\n            }\n        }\n    });\n}\nif (passwordForm) {\n    passwordForm.addEventListener('submit', async event => {\n        event.preventDefault();\n        document.querySelector('.btn--save-password').textContent =\n            'updating..';\n\n        const currentPassword = document.getElementById('password-current')\n            .value;\n        const password = document.getElementById('password').value;\n        const passwordConfirm = document.getElementById('password-confirm')\n            .value;\n        await updateSettings(\n            { currentPassword, password, passwordConfirm },\n            'password'\n        );\n\n        document.querySelector('.btn--save-password').textContent =\n            'SAVE PASSWORD';\n\n        document.getElementById('password-current').value = '';\n        document.getElementById('password').value = '';\n        document.getElementById('password-confirm').value = '';\n    });\n}\nif (bookTourBTN) {\n    bookTourBTN.addEventListener('click', event => {\n        event.target.textContent = 'Processing...';\n        // all can work same\n        // const tourId = document.getElementById('book-tour').dataset.tourId;\n        // const tourId = event.target.dataset.tourId;\n        const { tourId } = event.target.dataset; // destructuring way\n        bookTour(tourId);\n    });\n}\nif (headAlertDataset) {\n    showAlert('success', headAlertDataset, 20);\n}\nif (queryString) {\n    const urlParams = new URLSearchParams(queryString);\n    const signUpName = urlParams.get('signUpName');\n    const isPreviousSignup = urlParams.get('isPreviousSignup');\n    const alert = urlParams.get('alert');\n    if (signUpName) {\n        document.querySelector('.nameSignup').value = decodeURI(signUpName);\n    }\n    if (isPreviousSignup === 'true') {\n        showAlert(\n            'success',\n            // 'You have already done Sign up before. If you have not set the password yet then please fill the form',\n            'Please Set Your Password!',\n            20\n        );\n    }\n    if(alert){\n        showAlert(\n            'error',\n            alert,\n            20\n        );\n    }\n}\n// if cookie is expired or if it is not present\n// if someone externally modified (already considered)\nif (getCookie('tm') < Date.now()) {\n    getAccessToken();\n}\n"],"names":["$35bba5fe40a8e829$export$4c5dd147b21b9176","locations","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","el","document","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","$85d91bfa7ffc1002$export$516836c6a9dfc573","querySelector","parentElement","removeChild","$85d91bfa7ffc1002$export$de026b00723010c1","type","msg","time","markup","insertAdjacentHTML","window","setTimeout","$19b6e0f70507cc92$var$urlDomain","$19b6e0f70507cc92$export$596d806903d1f59e","async","email","password","axios","method","url","data","withCredentials","status","location","assign","err","response","message","$19b6e0f70507cc92$export$7200a869094fec36","name","passwordConfirm","$893122d4fa19055b$export$f558026a994b6051","res","toUpperCase","updatedUser","photo","$893122d4fa19055b$export$e6ae854901d9cdd0","tour","review","rating","reload","$893122d4fa19055b$export$d3c5cfb56947edec","revId","$893122d4fa19055b$export$b6b73587b93964c2","reviewid","$24798e902312676d$export$8d5bdbf26681c0c2","tourId","session","console","log","error","request","_response","$16c17a678b9835ca$var$mapBox","getElementById","$16c17a678b9835ca$var$reviewFormCreate","$16c17a678b9835ca$var$reviewForm","$16c17a678b9835ca$var$reviewDeleteBtns","querySelectorAll","$16c17a678b9835ca$var$reviewChangeBtns","$16c17a678b9835ca$var$loginForm","$16c17a678b9835ca$var$signupForm","$16c17a678b9835ca$var$logoutBtn","$16c17a678b9835ca$var$dataForm","$16c17a678b9835ca$var$passwordForm","$16c17a678b9835ca$var$imageChange","$16c17a678b9835ca$var$bookTourBTN","$16c17a678b9835ca$var$headAlertDataset","dataset","alert","$16c17a678b9835ca$var$headerName","$16c17a678b9835ca$var$queryString","search","JSON","parse","addEventListener","event","preventDefault","tourid","value","revid","button","target","updatedName","textContent","form","FormData","append","files","newUserPhotoName","startsWith","setAttribute","currentPassword","urlParams","URLSearchParams","signUpName","get","isPreviousSignup","decodeURI","cname","ca","cookie","split","i","length","c","charAt","substring","indexOf","Date","now"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}